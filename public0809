<script>
$(document).ready(function () {
  Papa.parse('ranking.csv', {
    download: true,
    header: true,
    skipEmptyLines: true,
    complete: function (results) {
      const table = $('#ranking-table').DataTable({
        data: results.data.filter(row => row["é †ä½"] && row["ç®¡ç†No"] && row["åˆè¨ˆã‚¹ã‚³ã‚¢"]),
        columns: [
          { data: "é †ä½" },
          { data: "ç®¡ç†No" },
          { data: "åˆè¨ˆã‚¹ã‚³ã‚¢" }
        ],
        language: {
          url: "https://cdn.datatables.net/plug-ins/1.13.4/i18n/ja.json"
        },
        pageLength: 25
      });

      // ğŸ”§ æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã®å…¥åŠ›ã‚’åŠè§’è‹±æ•°å­—ã«å¤‰æ›
      $('#ranking-table_filter input').on('input', function () {
        const converted = this.value.replace(/[ï¼¡-ï¼ºï½-ï½šï¼-ï¼™]/g, function (s) {
          return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);
        });
        if (this.value !== converted) {
          this.value = converted;
          table.search(converted).draw(); // å†æ¤œç´¢
        }
      });
    }
  });
});
</script>
